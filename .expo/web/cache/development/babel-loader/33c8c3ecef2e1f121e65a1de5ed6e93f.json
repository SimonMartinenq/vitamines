{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useEffect, useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { COLORS, SIZES, SHADOWS, assets } from \"../constants\";\nimport { SubInfo, ReceipeTitle } from \"./SubInfo\";\nimport { RectButton, CircleButton } from \"./Button\";\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport { db, auth } from \"../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ReceipeCard = function ReceipeCard(_ref) {\n  var data = _ref.data;\n  var navigation = useNavigation();\n\n  var _useState = useState(assets.heartEmpty),\n      _useState2 = _slicedToArray(_useState, 2),\n      FavColor = _useState2[0],\n      setFavColor = _useState2[1];\n\n  var updateFav = function updateFav() {\n    db.collection('Users').doc(auth.currentUser.uid).get().then(function (querySnapshot) {\n      var dic = querySnapshot.data();\n      return dic;\n    }).then(function (dic) {\n      var fav = dic.favoris;\n\n      if (fav.includes(data.id) !== true) {\n        fav.push(data.id);\n        db.collection('Users').doc(auth.currentUser.uid).update({\n          favoris: fav\n        });\n        setFavColor(assets.heart);\n        console.log(\"favoris add\");\n      } else {\n        db.collection('Users').doc(auth.currentUser.uid).update({\n          favoris: firebase.firestore.FieldValue.arrayRemove(data.id)\n        });\n        setFavColor(assets.heartEmpty);\n        console.log(\"favoris remove\");\n      }\n    });\n  };\n\n  var updateColor = function updateColor() {\n    db.collection('Users').doc(auth.currentUser.uid).get().then(function (querySnapshot) {\n      var dic = querySnapshot.data();\n      return dic;\n    }).then(function (dic) {\n      var fav = dic.favoris;\n\n      if (fav.includes(data.id) !== true) {\n        setFavColor(assets.heartEmpty);\n      } else {\n        setFavColor(assets.heart);\n      }\n    });\n  };\n\n  useEffect(function () {\n    updateColor();\n  }, []);\n  return _jsxs(View, {\n    style: _objectSpread({\n      backgroundColor: COLORS.white,\n      borderRadius: SIZES.font,\n      marginBottom: SIZES.extraLarge,\n      margin: SIZES.base\n    }, SHADOWS.dark),\n    children: [_jsxs(View, {\n      style: {\n        width: \"100%\",\n        height: 250\n      },\n      children: [_jsx(Image, {\n        source: {\n          uri: data.image\n        },\n        resizeMode: \"cover\",\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          borderTopLeftRadius: SIZES.font,\n          borderTopRightRadius: SIZES.font\n        }\n      }), _jsx(CircleButton, {\n        imgUrl: FavColor,\n        right: 10,\n        top: 10,\n        handlePress: updateFav\n      })]\n    }), _jsx(SubInfo, {\n      tmpPrep: data.readyInMinutes\n    }), _jsxs(View, {\n      style: {\n        width: \"100%\",\n        padding: SIZES.font\n      },\n      children: [_jsx(ReceipeTitle, {\n        title: data.title,\n        titleSize: SIZES.large\n      }), _jsx(View, {\n        style: {\n          marginTop: SIZES.font,\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\"\n        },\n        children: _jsx(RectButton, {\n          minWidth: 120,\n          fontSize: SIZES.font,\n          handlePress: function handlePress() {\n            return navigation.navigate(\"Details\", {\n              data: data\n            });\n          }\n        })\n      })]\n    })]\n  });\n};\n\nexport default ReceipeCard;","map":{"version":3,"names":["useEffect","useState","useNavigation","COLORS","SIZES","SHADOWS","assets","SubInfo","ReceipeTitle","RectButton","CircleButton","firebase","db","auth","ReceipeCard","data","navigation","heartEmpty","FavColor","setFavColor","updateFav","collection","doc","currentUser","uid","get","then","querySnapshot","dic","fav","favoris","includes","id","push","update","heart","console","log","firestore","FieldValue","arrayRemove","updateColor","backgroundColor","white","borderRadius","font","marginBottom","extraLarge","margin","base","dark","width","height","uri","image","borderTopLeftRadius","borderTopRightRadius","readyInMinutes","padding","title","large","marginTop","flexDirection","justifyContent","alignItems","navigate"],"sources":["C:/Users/masso/OneDrive/Bureau/Mastercamp_vitamines/vitamines/components/ReceipeCard.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { View, Image } from \"react-native\";\r\n\r\nimport { COLORS, SIZES, SHADOWS, assets } from \"../constants\";\r\nimport { SubInfo, ReceipeTitle } from \"./SubInfo\";\r\nimport { RectButton, CircleButton } from \"./Button\";\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nimport { db, auth } from \"../firebase\";\r\n\r\n\r\nconst ReceipeCard = ({ data }) => {\r\n\r\n  const navigation = useNavigation();\r\n  const [FavColor, setFavColor] = useState(assets.heartEmpty);\r\n\r\n  const updateFav = () => {\r\n    db\r\n      .collection('Users')\r\n      .doc(auth.currentUser.uid)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n          const dic = querySnapshot.data()\r\n          return dic\r\n        })\r\n      .then((dic) => {\r\n        const fav = dic.favoris\r\n        if(fav.includes(data.id) !== true){\r\n          fav.push(data.id)\r\n          db.collection('Users').doc(auth.currentUser.uid).update({favoris:fav})\r\n          setFavColor(assets.heart)\r\n          console.log(\"favoris add\")\r\n        }else{\r\n          db.collection('Users').doc(auth.currentUser.uid).update({\r\n            favoris:firebase.firestore.FieldValue.arrayRemove(data.id)\r\n          })\r\n          setFavColor(assets.heartEmpty)\r\n          console.log(\"favoris remove\")\r\n        }\r\n      })\r\n  };\r\n\r\n  const updateColor = () => {\r\n    db\r\n      .collection('Users')\r\n      .doc(auth.currentUser.uid)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n          const dic = querySnapshot.data()\r\n          return dic\r\n        })\r\n      .then((dic) => {\r\n        const fav = dic.favoris\r\n        if(fav.includes(data.id) !== true){\r\n          setFavColor(assets.heartEmpty)\r\n        }else{\r\n          setFavColor(assets.heart)\r\n        }\r\n      })\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateColor();\r\n  }, []);\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        backgroundColor: COLORS.white,\r\n        borderRadius: SIZES.font,\r\n        marginBottom: SIZES.extraLarge,\r\n        margin: SIZES.base,\r\n        ...SHADOWS.dark,\r\n      }}\r\n    >\r\n      <View\r\n        style={{\r\n          width: \"100%\",\r\n          height: 250,\r\n        }}\r\n      >\r\n        <Image\r\n          source={{uri : data.image}}\r\n          resizeMode=\"cover\"\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            borderTopLeftRadius: SIZES.font,\r\n            borderTopRightRadius: SIZES.font,\r\n          }}\r\n        />\r\n\r\n        <CircleButton imgUrl={FavColor} right={10} top={10} handlePress={updateFav}/>\r\n      </View>\r\n\r\n      <SubInfo tmpPrep={data.readyInMinutes}/>\r\n\r\n      <View style={{ width: \"100%\", padding: SIZES.font }}>\r\n        <ReceipeTitle\r\n          title={data.title}\r\n          titleSize={SIZES.large}\r\n        />\r\n\r\n        <View\r\n          style={{\r\n            marginTop: SIZES.font,\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <RectButton\r\n            minWidth={120}\r\n            fontSize={SIZES.font}\r\n            handlePress={() => navigation.navigate(\"Details\", { data })}\r\n          />\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ReceipeCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}