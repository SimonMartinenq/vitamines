{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { auth, db } from \"../firebase\";\nimport { ReceipeCard } from \"../components\";\nimport { assets, COLORS, SIZES } from \"../constants\";\nimport { useState, useEffect } from 'react';\nimport { apiKey } from \"../constants/api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Favoris = function Favoris() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      mealData = _useState2[0],\n      setMealData = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nbrFav = _useState4[0],\n      setNbrFav = _useState4[1];\n\n  var handleSearch = function handleSearch(value) {\n    if (value.length === 0) {\n      setMealData(mealData);\n    }\n\n    var filteredData = mealData.filter(function (item) {\n      return item.results[0].title.toLowerCase().includes(value.toLowerCase());\n    });\n\n    if (filteredData.length === 0) {\n      setMealData(mealData);\n    } else {\n      setMealData(filteredData);\n    }\n  };\n\n  var getFavoris = function getFavoris() {\n    return _regeneratorRuntime.async(function getFavoris$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            db.collection('Users').doc(auth.currentUser.uid).get().then(function (querySnapshot) {\n              var dic = querySnapshot.data();\n              return dic.favoris;\n            }).then(function (array) {\n              setNbrFav(array.length);\n              var favTab = [];\n              array.forEach(function (element) {\n                fetch(\"https://api.spoonacular.com/recipes/complexSearch?apiKey=\" + apiKey + \"&titleMatch=\" + element + \"&addRecipeInformation=true&fillIngredients=true&addRecipeNutrition=true&addRecipeInformation=true\").then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  favTab.push(data);\n                  setMealData(favTab);\n                }).catch(function () {\n                  console.log(\"error\");\n                });\n              });\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getFavoris();\n  }, []);\n\n  function AffichageFav() {\n    if (nbrFav) {\n      return _jsxs(View, {\n        style: {\n          backgroundColor: COLORS.white\n        },\n        children: [_jsx(Text, {\n          style: styles.textFav,\n          children: \" Your favorites \"\n        }), \" \", _jsx(FlatList, {\n          data: mealData,\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            return _jsx(ReceipeCard, {\n              data: item.results[0]\n            });\n          },\n          keyExtractor: function keyExtractor(item) {\n            return item.id;\n          },\n          listKey: \"favoris\",\n          showsVerticalScrollIndicator: false\n        }), \" \"]\n      });\n    } else {\n      return _jsxs(View, {\n        style: styles.containerFav,\n        children: [_jsx(Image, {\n          source: assets.heartbroken,\n          style: {\n            resizeMode: \"contain\",\n            marginRight: \"auto\",\n            marginLeft: \"auto\",\n            marginBottom: '3%',\n            width: 50,\n            height: 50\n          }\n        }), \" \", _jsx(Text, {\n          style: styles.textFav,\n          children: \" No recipe saved yet.Add one! \"\n        })]\n      });\n    }\n  }\n\n  return _jsxs(SafeAreaView, {\n    style: {\n      backgroundColor: COLORS.primary\n    },\n    children: [_jsxs(View, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: {\n          backgroundColor: COLORS.primary,\n          alignItems: 'center'\n        },\n        children: [_jsx(Text, {\n          style: styles.textnavbar,\n          children: \" Favorites \"\n        }), \" \"]\n      }), \" \", _jsxs(View, {\n        style: {\n          marginTop: SIZES.font,\n          width: \"90%\"\n        },\n        children: [_jsxs(View, {\n          style: styles.searchBarFav,\n          children: [_jsx(Image, {\n            source: assets.search,\n            resizeMode: \"contain\",\n            style: {\n              width: 20,\n              height: 20,\n              marginRight: SIZES.base\n            }\n          }), \" \", _jsx(TextInput, {\n            placeholder: \"Search through your favorites\",\n            placeholderTextColor: \"gray\",\n            style: {\n              flex: 1\n            },\n            onChangeText: handleSearch\n          }), \" \"]\n        }), \" \"]\n      }), \" \"]\n    }), _jsx(View, {\n      style: {\n        width: \"100%\",\n        height: \"80%\",\n        backgroundColor: COLORS.primary\n      },\n      children: _jsx(AffichageFav, {})\n    }), \"  \"]\n  });\n};\n\nexport default Favoris;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    height: '20%',\n    backgroundColor: COLORS.primary,\n    alignItems: 'center'\n  },\n  navbarfav: {\n    width: \"100%\",\n    height: \"20%\",\n    marginTop: 10,\n    backgroundColor: COLORS.primary\n  },\n  textnavbar: {\n    fontSize: 25,\n    marginTop: \"auto\",\n    marginBottom: \"auto\"\n  },\n  textFav: {\n    width: \"70%\",\n    marginRight: \"auto\",\n    marginLeft: \"auto\",\n    fontSize: 18,\n    padding: 5,\n    justifyContent: \"center\",\n    textAlign: \"center\"\n  },\n  searchBarFav: {\n    width: \"100%\",\n    borderRadius: SIZES.font,\n    backgroundColor: COLORS.white,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: SIZES.font,\n    paddingVertical: SIZES.small - 2,\n    marginTop: \"5%\"\n  },\n  containerFav: {\n    flex: 1,\n    width: \"100%\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"names":["auth","db","ReceipeCard","assets","COLORS","SIZES","useState","useEffect","apiKey","Favoris","mealData","setMealData","nbrFav","setNbrFav","handleSearch","value","length","filteredData","filter","item","results","title","toLowerCase","includes","getFavoris","collection","doc","currentUser","uid","get","then","querySnapshot","dic","data","favoris","array","favTab","forEach","element","fetch","response","json","push","catch","console","log","AffichageFav","backgroundColor","white","styles","textFav","id","containerFav","heartbroken","resizeMode","marginRight","marginLeft","marginBottom","width","height","primary","container","alignItems","textnavbar","marginTop","font","searchBarFav","search","base","flex","StyleSheet","create","justifyContent","navbarfav","fontSize","padding","textAlign","borderRadius","flexDirection","paddingHorizontal","paddingVertical","small"],"sources":["/Users/smartinenq/Desktop/Vitamines/Vitamines/VitaminesGithub/Sans titre/screens/Favoris.js"],"sourcesContent":["import { View, SafeAreaView, Image, TextInput, Text, StyleSheet, FlatList, ScrollView } from 'react-native'\nimport { auth, db } from '../firebase'\nimport { ReceipeCard } from '../components'\nimport { assets, COLORS, SIZES } from '../constants'\nimport { useState, useEffect } from 'react'\nimport { apiKey } from '../constants/api'\n\nconst Favoris = () => {\n        const [mealData, setMealData] = useState(null);\n        const [nbrFav, setNbrFav] = useState(0)\n\n        const handleSearch = (value) => {\n            if (value.length === 0) {\n                setMealData(mealData);\n            }\n            const filteredData = mealData.filter((item) =>\n                item.results[0].title.toLowerCase().includes(value.toLowerCase())\n            );\n\n            if (filteredData.length === 0) {\n                setMealData(mealData);\n            } else {\n                setMealData(filteredData);\n            }\n        };\n\n        const getFavoris = async() => {\n            db\n                .collection('Users')\n                .doc(auth.currentUser.uid)\n                .get()\n                .then((querySnapshot) => {\n                    const dic = querySnapshot.data()\n                    return dic.favoris\n                })\n                .then((array) => {\n                    setNbrFav(array.length)\n                    let favTab = []\n                    array.forEach(element => {\n                        fetch(\n                                `https://api.spoonacular.com/recipes/complexSearch?apiKey=${apiKey}&titleMatch=${element}&addRecipeInformation=true&fillIngredients=true&addRecipeNutrition=true&addRecipeInformation=true`\n\n                            )\n                            .then(response => response.json())\n                            .then((data) => {\n                                favTab.push(data)\n                                setMealData(favTab)\n                                    //console.log(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nLISTS OF DISHES\\n\",favTab)\n                            })\n                            .catch(() => {\n                                console.log(\"error\")\n                            })\n                    })\n                })\n\n        };\n\n        useEffect(() => {\n            getFavoris();\n        }, []);\n\n        function AffichageFav() {\n            if (nbrFav) {\n                return ( <\n                    View style = {\n                        { backgroundColor: COLORS.white } } >\n                    <\n                    Text style = { styles.textFav } > Your favorites < /Text> <\n                    FlatList data = { mealData }\n                    renderItem = {\n                        ({ item }) => < ReceipeCard data = { item.results[0] }\n                        />}\n                        keyExtractor = {\n                            (item) => item.id }\n                        listKey = \"favoris\"\n                        showsVerticalScrollIndicator = { false }\n                        /> <\n                        /View> \n                    );\n                }\n                else {\n                    return ( <\n                        View style = { styles.containerFav } >\n                        <\n                        Image source = { assets.heartbroken }\n                        style = {\n                            {\n                                resizeMode: \"contain\",\n                                marginRight: \"auto\",\n                                marginLeft: \"auto\",\n                                marginBottom: '3%',\n                                width: 50,\n                                height: 50,\n                            }\n                        }\n                        /> <\n                        Text style = { styles.textFav } > No recipe saved yet.Add one! < /Text></View >\n                    );\n                }\n            }\n\n            return ( <\n                SafeAreaView style = {\n                    { backgroundColor: COLORS.primary } } >\n                <\n                View style = { styles.container } >\n                <\n                View style = {\n                    { backgroundColor: COLORS.primary, alignItems: 'center' } } >\n                <\n                Text style = { styles.textnavbar } > Favorites < /Text> <\n                /View> <\n                View style = {\n                    {\n                        marginTop: SIZES.font,\n                        width: \"90%\"\n                    }\n                } >\n                <\n                View style = { styles.searchBarFav } >\n                <\n                Image source = { assets.search }\n                resizeMode = \"contain\"\n                style = {\n                    { width: 20, height: 20, marginRight: SIZES.base } }\n                /> <\n                TextInput placeholder = \"Search through your favorites\"\n                placeholderTextColor = \"gray\"\n                style = {\n                    {\n                        flex: 1,\n                    }\n                }\n                onChangeText = { handleSearch }\n                /> <\n                /View> <\n                /View> <\n                /View>\n\n                <\n                View style = {\n                    { width: \"100%\", height: \"80%\", backgroundColor: COLORS.primary } } >\n                <\n                AffichageFav / >\n                <\n                /View>  <\n                /SafeAreaView>\n            );\n        };\n        export default Favoris;\n\n        const styles = StyleSheet.create({\n            container: {\n                flex: 1,\n                justifyContent: \"center\",\n                height: '20%',\n                backgroundColor: COLORS.primary,\n                alignItems: 'center'\n            },\n            navbarfav: {\n                width: \"100%\",\n                height: \"20%\",\n                marginTop: 10,\n                backgroundColor: COLORS.primary,\n            },\n            textnavbar: {\n                fontSize: 25,\n                marginTop: \"auto\",\n                marginBottom: \"auto\",\n            },\n            textFav: {\n                width: \"70%\",\n                marginRight: \"auto\",\n                marginLeft: \"auto\",\n                fontSize: 18,\n                padding: 5,\n                justifyContent: \"center\",\n                textAlign: \"center\",\n            },\n            searchBarFav: {\n                width: \"100%\",\n                borderRadius: SIZES.font,\n                backgroundColor: COLORS.white,\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                paddingHorizontal: SIZES.font,\n                paddingVertical: SIZES.small - 2,\n                marginTop: \"5%\",\n            },\n            containerFav: {\n                flex: 1,\n                width: \"100%\",\n                justifyContent: \"center\",\n            }\n        })"],"mappings":"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"},"metadata":{},"sourceType":"module"}