{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useEffect, useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { COLORS, SIZES, SHADOWS, assets } from \"../constants\";\nimport { SubInfo, ReceipeTitle } from \"./SubInfo\";\nimport { RectButton, CircleButton } from \"./Button\";\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport { db, auth } from \"../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ReceipeCard = function ReceipeCard(_ref) {\n  var data = _ref.data;\n  var navigation = useNavigation();\n\n  var _useState = useState(assets.heartEmpty),\n      _useState2 = _slicedToArray(_useState, 2),\n      FavColor = _useState2[0],\n      setFavColor = _useState2[1];\n\n  var updateFav = function updateFav() {\n    db.collection('Users').doc(auth.currentUser.uid).get().then(function (querySnapshot) {\n      var dic = querySnapshot.data();\n      return dic;\n    }).then(function (dic) {\n      var fav = dic.favoris;\n\n      if (fav.includes(data.title) !== true) {\n        fav.push(data.title);\n        db.collection('Users').doc(auth.currentUser.uid).update({\n          favoris: fav\n        });\n        setFavColor(assets.heart);\n        console.log(\"favoris add\");\n      } else {\n        db.collection('Users').doc(auth.currentUser.uid).update({\n          favoris: firebase.firestore.FieldValue.arrayRemove(data.title)\n        });\n        setFavColor(assets.heartEmpty);\n        console.log(\"favoris remove\");\n      }\n    });\n  };\n\n  var updateColor = function updateColor() {\n    db.collection('Users').doc(auth.currentUser.uid).get().then(function (querySnapshot) {\n      var dic = querySnapshot.data();\n      return dic;\n    }).then(function (dic) {\n      var fav = dic.favoris;\n\n      if (fav.includes(data.id) !== true) {\n        setFavColor(assets.heartEmpty);\n      } else {\n        setFavColor(assets.heart);\n      }\n    });\n  };\n\n  useEffect(function () {\n    updateColor();\n  }, []);\n  console.log(\"favori 1 ou 2\", data);\n  return _jsxs(View, {\n    style: _objectSpread({\n      backgroundColor: COLORS.white,\n      borderRadius: SIZES.font,\n      marginBottom: SIZES.extraLarge,\n      margin: SIZES.base\n    }, SHADOWS.dark),\n    children: [_jsxs(View, {\n      style: {\n        width: \"100%\",\n        height: 250\n      },\n      children: [_jsx(Image, {\n        source: {\n          uri: data.image\n        },\n        resizeMode: \"cover\",\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          borderTopLeftRadius: SIZES.font,\n          borderTopRightRadius: SIZES.font\n        }\n      }), _jsx(CircleButton, {\n        imgUrl: FavColor,\n        right: 10,\n        top: 10,\n        handlePress: updateFav\n      })]\n    }), _jsx(SubInfo, {\n      tmpPrep: data.readyInMinutes\n    }), _jsxs(View, {\n      style: {\n        width: \"100%\",\n        padding: SIZES.font\n      },\n      children: [_jsx(ReceipeTitle, {\n        title: data.title,\n        titleSize: SIZES.large\n      }), _jsx(View, {\n        style: {\n          marginTop: SIZES.font,\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\"\n        },\n        children: _jsx(RectButton, {\n          minWidth: 120,\n          fontSize: SIZES.font,\n          handlePress: function handlePress() {\n            if (data[\"analyzedInstructions\"][0] !== undefined) {\n              navigation.navigate(\"Details\", {\n                data: data\n              });\n            } else {\n              Linking.openURL(data.sourceUrl);\n            }\n          }\n        })\n      })]\n    })]\n  });\n};\n\nexport default ReceipeCard;","map":{"version":3,"names":["useEffect","useState","useNavigation","COLORS","SIZES","SHADOWS","assets","SubInfo","ReceipeTitle","RectButton","CircleButton","firebase","db","auth","ReceipeCard","data","navigation","heartEmpty","FavColor","setFavColor","updateFav","collection","doc","currentUser","uid","get","then","querySnapshot","dic","fav","favoris","includes","title","push","update","heart","console","log","firestore","FieldValue","arrayRemove","updateColor","id","backgroundColor","white","borderRadius","font","marginBottom","extraLarge","margin","base","dark","width","height","uri","image","borderTopLeftRadius","borderTopRightRadius","readyInMinutes","padding","large","marginTop","flexDirection","justifyContent","alignItems","undefined","navigate","Linking","openURL","sourceUrl"],"sources":["/Users/smartinenq/Desktop/Vitamines/Vitamines/VitaminesGithub/Sans titre/components/ReceipeCard.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { View, Image} from \"react-native\";\n\nimport { COLORS, SIZES, SHADOWS, assets } from \"../constants\";\nimport { SubInfo, ReceipeTitle } from \"./SubInfo\";\nimport { RectButton, CircleButton } from \"./Button\";\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\nimport { db, auth } from \"../firebase\";\n\n\nconst ReceipeCard = ({ data }) => {\n\n  const navigation = useNavigation();\n  const [FavColor, setFavColor] = useState(assets.heartEmpty);\n\n  const updateFav = () => {\n    db\n      .collection('Users')\n      .doc(auth.currentUser.uid)\n      .get()\n      .then((querySnapshot) => {\n          const dic = querySnapshot.data()\n          return dic\n        })\n      .then((dic) => {\n        const fav = dic.favoris\n        if(fav.includes(data.title) !== true){\n          fav.push(data.title)\n          db.collection('Users').doc(auth.currentUser.uid).update({favoris:fav})\n          setFavColor(assets.heart)\n          console.log(\"favoris add\")\n        }else{\n          db.collection('Users').doc(auth.currentUser.uid).update({\n            favoris:firebase.firestore.FieldValue.arrayRemove(data.title)\n          })\n          setFavColor(assets.heartEmpty)\n          console.log(\"favoris remove\")\n        }\n      })\n  };\n\n  const updateColor = () => {\n    db\n      .collection('Users')\n      .doc(auth.currentUser.uid)\n      .get()\n      .then((querySnapshot) => {\n          const dic = querySnapshot.data()\n          return dic\n        })\n      .then((dic) => {\n        const fav = dic.favoris\n        if(fav.includes(data.id) !== true){\n          setFavColor(assets.heartEmpty)\n        }else{\n          setFavColor(assets.heart)\n        }\n      })\n  };\n\n  useEffect(() => {\n    updateColor();\n  }, []);\n  console.log(\"favori 1 ou 2\",data)\n  return (\n    <View\n      style={{\n        backgroundColor: COLORS.white,\n        borderRadius: SIZES.font,\n        marginBottom: SIZES.extraLarge,\n        margin: SIZES.base,\n        ...SHADOWS.dark,\n      }}\n    >\n      <View\n        style={{\n          width: \"100%\",\n          height: 250,\n        }}\n      >\n        <Image\n          source={{uri : data.image}}\n          resizeMode=\"cover\"\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            borderTopLeftRadius: SIZES.font,\n            borderTopRightRadius: SIZES.font,\n          }}\n        />\n\n        <CircleButton imgUrl={FavColor} right={10} top={10} handlePress={updateFav}/>\n      </View>\n\n      <SubInfo tmpPrep={data.readyInMinutes}/>\n\n      <View style={{ width: \"100%\", padding: SIZES.font }}>\n        <ReceipeTitle\n          title={data.title}\n          titleSize={SIZES.large}\n        />\n\n        <View\n          style={{\n            marginTop: SIZES.font,\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <RectButton\n            minWidth={120}\n            fontSize={SIZES.font}\n            handlePress={() => {\n              if(data[\"analyzedInstructions\"][0] !== undefined){\n                navigation.navigate(\"Details\", { data })\n              }\n              else{\n                Linking.openURL(data.sourceUrl)\n              }\n            }}\n          />\n        </View>\n      </View>\n    </View>\n  );\n};\n\nexport default ReceipeCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}